<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pinjemin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: "Inter", sans-serif;
    }
  </style>
</head>

<body class="bg-white text-gray-900">
  <div id="navbar"></div>

  <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-12 py-10">
    <form id="listForm" aria-label="List Your Item form" class="bg-white rounded-lg p-8 mb-8" novalidate>
      <h2 class="font-semibold text-[#0B1E40] text-lg mb-4">List Your Item</h2>

      <!-- Alert box -->
      <div id="formAlert" class="hidden mb-4 text-sm text-red-600 bg-red-100 border border-red-300 rounded p-3" role="alert"></div>

      <div class="border border-[#D1D5DB] rounded-md p-4 mb-6 text-xs text-[#6B7280] leading-tight">
        List your unused items and earn money. Provide detailed information to
        make your listing stand out. Clear photos and descriptions attract more
        renters.
      </div>

      <label class="block text-xs text-[#374151] mb-1" for="item-name">Item Name</label>
      <input id="item-name" name="item-name" type="text"
        class="w-full border border-[#D1D5DB] rounded-md px-3 py-2 text-xs text-[#6B7280] mb-1 focus:outline-none focus:ring-2 focus:ring-[#FFB800]"
        placeholder="e.g., Power Drill, DSLR Camera, Camping Tent" />
      <p class="text-[10px] text-[#9CA3AF] mb-4">A clear, specific name helps renters find your item.</p>

      <label class="block text-xs text-[#374151] mb-1" for="category">Category</label>
      <select id="category" name="category"
        class="w-full border border-[#D1D5DB] rounded-md px-3 py-2 text-xs text-[#6B7280] mb-1 focus:outline-none focus:ring-2 focus:ring-[#FFB800]">
        <option value="">Select category</option>
        <option>Tools</option>
        <option>Electronics</option>
        <option>Camping</option>
      </select>
      <p class="text-[10px] text-[#9CA3AF] mb-4">Choose the category that best fits your item.</p>

      <label class="block text-xs text-[#374151] mb-1" for="description">Description</label>
      <textarea id="description" name="description" rows="4"
        class="w-full border border-[#D1D5DB] rounded-md px-3 py-2 text-xs text-[#6B7280] mb-1 resize-none focus:outline-none focus:ring-2 focus:ring-[#FFB800]"
        placeholder="Describe your item in detail, including condition, features, and any included accessories"></textarea>
      <p class="text-[10px] text-[#9CA3AF] mb-6">Be thorough and highlight the benefits of your item.</p>

      <div class="flex flex-col sm:flex-row sm:space-x-6 mb-6">
        <div class="flex-1">
          <label class="block text-xs text-[#374151] mb-1" for="daily-price">Daily Rental Price</label>
          <div
            class="flex items-center border border-[#D1D5DB] rounded-md px-3 py-2 text-xs text-[#6B7280] mb-1">
            <span class="select-none">Rp.</span>
            <input id="daily-price" name="daily-price" type="number" min="0"
              class="w-full bg-transparent text-xs text-[#6B7280] ml-1 focus:outline-none" value="0" />
          </div>
          <p class="text-[10px] text-[#9CA3AF]">Set a competitive daily rate.</p>
        </div>
        <div class="flex-1 mt-4 sm:mt-0">
          <label class="block text-xs text-[#374151] mb-1" for="location">Location</label>
          <input id="location" name="location" type="text"
            class="w-full border border-[#D1D5DB] rounded-md px-3 py-2 text-xs text-[#6B7280] mb-1 focus:outline-none focus:ring-2 focus:ring-[#FFB800]"
            placeholder="e.g., Bogor, Jawa Barat" />
          <p class="text-[10px] text-[#9CA3AF]">Where renters can pick up the item.</p>
        </div>
      </div>

      <label class="block text-xs text-[#374151] mb-1" for="photos">Upload Photos</label>
      <label for="photos"
        class="cursor-pointer w-20 h-20 border border-dashed border-[#9CA3AF] rounded-md flex flex-col items-center justify-center text-[#9CA3AF] text-xs mb-2 focus:outline-none">
        <i class="fas fa-camera text-lg mb-1"></i>
        <span>Upload</span>
      </label>
      <input id="photos" name="photos" type="file" accept="image/*" multiple class="hidden" />
      <div id="previewContainer" class="flex flex-wrap gap-2 mt-2"></div>
      <p class="text-[10px] text-[#9CA3AF] mb-6">
        Add up to 6 high-quality photos. First image will be your listing's main photo.
      </p>

      <hr class="border-t border-[#E5E7EB] mb-6" />

      <div class="flex justify-end space-x-4">
        <button id="cancelBtn" type="button"
          class="text-[#1B2437] bg-white border border-[#374151] rounded-md px-4 py-2 text-xs hover:bg-[#F3F4F6] transition">
          Cancel
        </button>
        <button id="submitBtn" type="submit"
          class="bg-[#FFB800] text-white rounded-md px-4 py-2 text-xs flex items-center space-x-1 hover:bg-[#e6a700] transition">
          <i class="fas fa-check"></i>
          <span>List Item</span>
        </button>
      </div>
    </form>

    <section aria-label="Tips for a Great Listing"
      class="bg-white rounded-md p-4 text-[10px] text-[#0B1E40] max-w-4xl">
      <p class="font-semibold mb-1">Tips for a Great Listing</p>
      <ul class="list-disc list-inside space-y-0.5">
        <li>Use clear, well-lit photos from multiple angles</li>
        <li>Be honest about the item's condition</li>
        <li>Specify any instructions or requirements for use</li>
        <li>Respond quickly to rental requests</li>
        <li>Set a competitive price by looking at similar items</li>
      </ul>
    </section>
  </main>

  <div id="footer"></div>

  <script>
    // Load navbar and footer
    fetch('navbar_login.html')
      .then(res => res.text())
      .then(data => document.getElementById('navbar').innerHTML = data);

    fetch('footer.html')
      .then(res => res.text())
      .then(data => document.getElementById('footer').innerHTML = data);

    // Validation and Redirect Logic
    const form = document.getElementById('listForm');
    const alertBox = document.getElementById('formAlert');
    const cancelBtn = document.getElementById('cancelBtn');

    cancelBtn.addEventListener('click', () => {
      window.location.href = 'index_login.html';
    });

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      alertBox.classList.add('hidden');
      alertBox.innerHTML = '';

      const itemName = form['item-name'].value.trim();
      const category = form['category'].value.trim();
      const description = form['description'].value.trim();
      const price = form['daily-price'].value.trim();
      const location = form['location'].value.trim();

      let errors = [];

      if (!itemName) errors.push('Item Name is required.');
      if (!category) errors.push('Category is required.');
      if (!description) errors.push('Description is required.');
      if (!price || parseFloat(price) <= 0) errors.push('Daily Rental Price must be greater than 0.');
      if (!location) errors.push('Location is required.');

      if (errors.length > 0) {
        alertBox.innerHTML = errors.map(e => `<p>${e}</p>`).join('');
        alertBox.classList.remove('hidden');
        alertBox.scrollIntoView({ behavior: "smooth" });
        return;
      }

      alert('âœ… Your item has been listed!');
      window.location.href = 'browse_login.html';
    });
  </script>

   <script>
  const photoInput = document.getElementById('photos');
  const previewContainer = document.getElementById('previewContainer');

  photoInput.addEventListener('change', function () {
    previewContainer.innerHTML = ''; // clear old previews
    const files = Array.from(photoInput.files).slice(0, 6); // limit to 6 images

    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = function (e) {
        const img = document.createElement('img');
        img.src = e.target.result;
        img.alt = 'Preview';
        img.className = 'w-20 h-20 object-cover rounded border border-gray-200';
        previewContainer.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });
</script>

</body>

</html>
